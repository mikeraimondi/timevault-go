(function(){this.timevault.controller("HomeCtrl",["$scope",function(a){return a.appName="Timevault"}]),this.timevault.controller("PomodoroIndexCtrl",["$scope","$location","$filter","$interval","Pomodoro",function(a,b,c,d,e){return a.pomodoros=[],a.init=function(){var b;return this.pomodorosService=new e,a.pomodoros=this.pomodorosService.all(),b=d(function(){return a.updateRemaining()},1e3)},a.updateRemaining=function(){var b,c,d,e,f;for(e=a.pomodoros,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.percentageLeft=this.pomodorosService.percentageLeft(b),b.remainingTime=this.pomodorosService.remainingTime(b),f.push(b.progressBarType=this.pomodorosService.progressBarType(b));return f},a.runningPomodoro=function(){var b,c,d,e;for(e=a.pomodoros,c=0,d=e.length;d>c;c++)if(b=e[c],b.percentageLeft>0)return b},a.viewPomodoro=function(a){return b.url("/pomodoros/"+a)},a.destroyPomodoro=function(b){return this.pomodorosService.destroy(b),a.pomodoros=a.pomodoros.filter(function(a){return a.id!==b})},a.addWorkPeriod=function(){var b;return b=this.pomodorosService.create({set_duration:1500,activity:"work"}),a.pomodoros.unshift(b)},a.addBreakPeriod=function(){var b;return b=this.pomodorosService.create({set_duration:300,activity:"break"}),a.pomodoros.unshift(b)}}]),this.timevault.controller("PomodoroShowCtrl",["$scope","$http","$routeParams","Pomodoro",function(a,b,c,d){return a.init=function(){return this.pomodorosService=new d,a.pomodoro=this.pomodorosService.find(c.id)}}]),this.timevault.controller("RegistrationCtrl",["$scope","$location","Auth","$modalInstance",function(a,b,c,d){return a.user={},a.register=function(){var b;return b={email:a.user.email,password:a.user.password,password_confirmation:a.user.passwordConfirmation,phone_number:a.user.phoneNumber},c.register(b).then(function(a){return d.close(a)},function(a){var b,c;return console.log(c,function(){var d,e;d=a.data.errors,e=[];for(c in d)b=d[c],e.push(b);return e}())})},a.close=function(){return d.close()}}]),this.timevault.directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e;return e="#"+c.pwCheck,b.add(e).on("keyup",function(){return a.$apply(function(){var a;return a=b.val()===$(e).val(),d.$setValidity("pwmatch",a)})})}}}]),this.timevault.factory("Pomodoro",["$resource",function(a){var b;return b=function(){function b(){this.service=a("/api/pomodoros/:id",{id:"@id"},{update:{method:"PATCH"}})}return b.prototype.create=function(a){return new this.service({pomodoro:a}).$save(function(b){return a.id=b.id,a.start=b.start,a.activity=b.activity}),a},b.prototype.all=function(){return this.service.query()},b.prototype.find=function(a){return this.service.get({id:a})},b.prototype.destroy=function(a){return this.service["delete"]({id:a})},b.prototype.remainingSeconds=function(a){var b,c,d,e,f;return e=new Date(a.start),b=e.getSeconds()+a.set_duration,d=e.setSeconds(b),c=new Date,f=d-c,f>0?f/1e3:0},b.prototype.remainingTime=function(a){var b,c;return b=new Date(null),b.setSeconds(this.remainingSeconds(a)),c=b.toUTCString(),c.substr(c.indexOf(":")-2,8)},b.prototype.minutesLeft=function(a){return this.remainingSeconds(a)/60},b.prototype.percentageLeft=function(a){return Math.floor(this.remainingSeconds(a)/a.set_duration*100)},b.prototype.progressBarType=function(a){var b;switch(b=a.percentageLeft,!1){case!(10>=b):return"danger";case!(30>=b):return"warning";default:return"success"}},b}()}])}).call(this);
//# sourceMappingURL=app.min.js.map